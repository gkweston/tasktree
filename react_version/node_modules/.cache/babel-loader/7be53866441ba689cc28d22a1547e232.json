{"ast":null,"code":"import { deleteNode } from '../hierarchy/nodes';\nimport _ from 'lodash';\nexport function clearCompleted() {\n  return (dispatch, getState) => {\n    const state = getState();\n    const toDelete = [];\n\n    _.forEach(state.tasks, task => {\n      if (task.completed) {\n        toDelete.push(state.hierarchy.nodes.tasks[task.id]);\n      }\n    });\n\n    _.forEach(_.reverse(_.sortBy(toDelete, ['depth'])), node => {\n      dispatch(deleteNode('tasks', {\n        id: node.id\n      }));\n    });\n  };\n}","map":{"version":3,"sources":["/Users/gkweston/Git/todo-436/src/store/tasks/actions.js"],"names":["deleteNode","_","clearCompleted","dispatch","getState","state","toDelete","forEach","tasks","task","completed","push","hierarchy","nodes","id","reverse","sortBy","node"],"mappings":"AAAA,SAASA,UAAT,QAA2B,oBAA3B;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,OAAO,SAASC,cAAT,GAA0B;AAC/B,SAAO,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC7B,UAAMC,KAAK,GAAGD,QAAQ,EAAtB;AACA,UAAME,QAAQ,GAAG,EAAjB;;AAEAL,IAAAA,CAAC,CAACM,OAAF,CAAUF,KAAK,CAACG,KAAhB,EAAuBC,IAAI,IAAI;AAC7B,UAAIA,IAAI,CAACC,SAAT,EAAoB;AAClBJ,QAAAA,QAAQ,CAACK,IAAT,CAAcN,KAAK,CAACO,SAAN,CAAgBC,KAAhB,CAAsBL,KAAtB,CAA4BC,IAAI,CAACK,EAAjC,CAAd;AACD;AACF,KAJD;;AAMAb,IAAAA,CAAC,CAACM,OAAF,CAAUN,CAAC,CAACc,OAAF,CAAUd,CAAC,CAACe,MAAF,CAASV,QAAT,EAAmB,CAAC,OAAD,CAAnB,CAAV,CAAV,EAAoDW,IAAI,IAAI;AAC1Dd,MAAAA,QAAQ,CAACH,UAAU,CAAC,OAAD,EAAU;AAAEc,QAAAA,EAAE,EAAEG,IAAI,CAACH;AAAX,OAAV,CAAX,CAAR;AACD,KAFD;AAGD,GAbD;AAcD","sourcesContent":["import { deleteNode } from '../hierarchy/nodes';\nimport _ from 'lodash';\n\nexport function clearCompleted() {\n  return (dispatch, getState) => {\n    const state = getState();\n    const toDelete = [];\n\n    _.forEach(state.tasks, task => {\n      if (task.completed) {\n        toDelete.push(state.hierarchy.nodes.tasks[task.id]);\n      }\n    });\n\n    _.forEach(_.reverse(_.sortBy(toDelete, ['depth'])), node => {\n      dispatch(deleteNode('tasks', { id: node.id }));\n    });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}